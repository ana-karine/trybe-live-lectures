<!DOCTYPE html>
<html>
  <head>
    <title>Redux basic example</title>
    <script src="https://unpkg.com/redux@latest/dist/redux.min.js"></script>
  </head>
  <body>
    <div>
      Clicked: <span id="value">0</span> times
      <button id="increment">+</button>
      <button id="decrement">-</button>
      <button id="multi">Incrementa 10</button>
    </div>
    <script>

      /*
      this.state = {
        dataReducer: [],
        counterReducer: 0
      }

      combineReducers({
        dataReducer,
        counterReducer
      })

      function dataReducer(state = [], action) {

      }
      */

      const INCREMENT = "INCREMENT";
      const DECREMENT = "DECREMENT";

      function counterReducer(state = 0, action) {
        // reducer -> recebe o state de toda minha app
        // action -> o que deve ser atualizado e qual ação executada
        console.log('Antes de alterar o state', state);
        console.log(action);
        switch (action.type) {
          case INCREMENT:
            return state + action.value;
          case DECREMENT:
            return state - action.value;
          default:
            return state;
        }
      }

      // reducer (counterReducer) passado para store como callback
      const store = Redux.createStore(counterReducer);

      document.getElementById("increment")
        .addEventListener("click", () => {
          store.dispatch({ type: INCREMENT, value: 1 });
        });

      document.getElementById("decrement")
        .addEventListener("click", () => {
          store.dispatch({ type: DECREMENT, value: 1 });
        });

      document.getElementById("multi")
        .addEventListener("click", () => {
          store.dispatch({ type: INCREMENT, value: 10 });
        });

      store.subscribe(
        () =>
          (document.getElementById(
            "value"
          ).innerHTML = store.getState().toString())
      );
    </script>
  </body>
</html>
